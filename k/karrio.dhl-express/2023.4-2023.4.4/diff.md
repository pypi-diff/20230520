# Comparing `tmp/karrio.dhl_express-2023.4-py3-none-any.whl.zip` & `tmp/karrio.dhl_express-2023.4.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 26316 bytes, number of entries: 20
+Zip file size: 26265 bytes, number of entries: 20
 -rw-rw-r--  2.0 unx      576 b- defN 23-Mar-29 20:04 karrio/mappers/dhl_express/__init__.py
--rw-rw-r--  2.0 unx     3374 b- defN 23-Apr-01 12:45 karrio/mappers/dhl_express/mapper.py
--rw-rw-r--  2.0 unx     1938 b- defN 23-Apr-04 13:04 karrio/mappers/dhl_express/proxy.py
--rw-rw-r--  2.0 unx      447 b- defN 23-Apr-15 06:44 karrio/mappers/dhl_express/settings.py
+-rw-rw-r--  2.0 unx     3374 b- defN 23-Apr-23 04:04 karrio/mappers/dhl_express/mapper.py
+-rw-rw-r--  2.0 unx     1938 b- defN 23-Apr-23 04:04 karrio/mappers/dhl_express/proxy.py
+-rw-rw-r--  2.0 unx      447 b- defN 23-Apr-23 04:04 karrio/mappers/dhl_express/settings.py
 -rw-rw-r--  2.0 unx      690 b- defN 22-Nov-15 19:21 karrio/providers/dhl_express/__init__.py
--rw-rw-r--  2.0 unx     2895 b- defN 23-Apr-01 15:58 karrio/providers/dhl_express/address.py
--rw-rw-r--  2.0 unx      642 b- defN 23-Apr-04 18:00 karrio/providers/dhl_express/error.py
--rw-rw-r--  2.0 unx     9090 b- defN 23-Apr-04 18:03 karrio/providers/dhl_express/rate.py
--rw-rw-r--  2.0 unx    18193 b- defN 23-Apr-04 18:28 karrio/providers/dhl_express/shipment.py
--rw-rw-r--  2.0 unx     3768 b- defN 23-Apr-04 14:05 karrio/providers/dhl_express/tracking.py
--rw-rw-r--  2.0 unx    26580 b- defN 23-Apr-04 15:00 karrio/providers/dhl_express/units.py
--rw-rw-r--  2.0 unx     1558 b- defN 23-Apr-15 02:55 karrio/providers/dhl_express/utils.py
+-rw-rw-r--  2.0 unx     2855 b- defN 23-May-17 00:17 karrio/providers/dhl_express/address.py
+-rw-rw-r--  2.0 unx      642 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/error.py
+-rw-rw-r--  2.0 unx     8912 b- defN 23-May-20 10:01 karrio/providers/dhl_express/rate.py
+-rw-rw-r--  2.0 unx    18091 b- defN 23-May-17 00:17 karrio/providers/dhl_express/shipment.py
+-rw-rw-r--  2.0 unx     3768 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/tracking.py
+-rw-rw-r--  2.0 unx    26580 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/units.py
+-rw-rw-r--  2.0 unx     1558 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/utils.py
 -rw-rw-r--  2.0 unx      307 b- defN 22-Nov-15 19:21 karrio/providers/dhl_express/pickup/__init__.py
--rw-rw-r--  2.0 unx     2369 b- defN 23-Apr-04 18:00 karrio/providers/dhl_express/pickup/cancel.py
--rw-rw-r--  2.0 unx     4552 b- defN 23-Apr-04 18:02 karrio/providers/dhl_express/pickup/create.py
--rw-rw-r--  2.0 unx     4754 b- defN 23-Apr-01 15:18 karrio/providers/dhl_express/pickup/update.py
--rw-rw-r--  2.0 unx     1020 b- defN 23-Apr-18 07:10 karrio.dhl_express-2023.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Apr-18 07:10 karrio.dhl_express-2023.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        7 b- defN 23-Apr-18 07:10 karrio.dhl_express-2023.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1889 b- defN 23-Apr-18 07:10 karrio.dhl_express-2023.4.dist-info/RECORD
-20 files, 84741 bytes uncompressed, 23152 bytes compressed:  72.7%
+-rw-rw-r--  2.0 unx     2369 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/pickup/cancel.py
+-rw-rw-r--  2.0 unx     4512 b- defN 23-May-17 00:17 karrio/providers/dhl_express/pickup/create.py
+-rw-rw-r--  2.0 unx     4754 b- defN 23-Apr-23 04:04 karrio/providers/dhl_express/pickup/update.py
+-rw-rw-r--  2.0 unx     1022 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        7 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1897 b- defN 23-May-20 11:14 karrio.dhl_express-2023.4.4.dist-info/RECORD
+20 files, 84391 bytes uncompressed, 23085 bytes compressed:  72.6%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: karrio/providers/dhl_express/pickup/create.py
 Comment: 
 
 Filename: karrio/providers/dhl_express/pickup/update.py
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.dist-info/METADATA
+Filename: karrio.dhl_express-2023.4.4.dist-info/METADATA
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.dist-info/WHEEL
+Filename: karrio.dhl_express-2023.4.4.dist-info/WHEEL
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.dist-info/top_level.txt
+Filename: karrio.dhl_express-2023.4.4.dist-info/top_level.txt
 Comment: 
 
-Filename: karrio.dhl_express-2023.4.dist-info/RECORD
+Filename: karrio.dhl_express-2023.4.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## karrio/providers/dhl_express/address.py

```diff
@@ -59,15 +59,15 @@
     request = RouteRequest(
         schemaVersion="2.0",
         Request=settings.Request(
             MetaData=MetaData(SoftwareName="3PV", SoftwareVersion=1.0)
         ),
         RegionCode=CountryRegion[payload.address.country_code].value,
         RequestType=RequestType.D.value,
-        Address1=lib.text(address.street_number, address.address_line1),
+        Address1=address.street,
         Address2=address.address_line2,
         Address3=None,
         PostalCode=payload.address.postal_code,
         City=payload.address.city,
         Division=division,
         CountryCode=country.name,
         CountryName=country.value,
```

## karrio/providers/dhl_express/rate.py

```diff
@@ -37,20 +37,17 @@
 def _extract_quote(
     quote: dhl_response.QtdShpType,
     settings: provider_utils.Settings,
     ctx: typing.Dict[str, typing.Any] = {},
 ) -> models.RateDetails:
     is_document = ctx.get("is_document", False)
     is_international = ctx.get("is_international", False)
-    service = provider_units.ShippingService.map(
-        quote.GlobalProductCode if is_international else quote.LocalProductCode,
-    )
-    invalid_service = (
-        not is_international and service.name_or_key.endswith("_nondoc")
-    ) or (is_international and not is_document and service.name_or_key.endswith("_doc"))
+    service = provider_units.ShippingService.map(quote.GlobalProductCode)
+
+    invalid_service = is_document is False and "DOC" in quote.LocalProductCode
 
     if invalid_service:
         return None
 
     charges = [
         ("Base charge", quote.WeightCharge),
         *((s.LocalServiceTypeName, s.ChargeValue) for s in quote.QtdShpExChrg),
@@ -76,15 +73,15 @@
                 name=name,
                 amount=lib.to_decimal(amount),
                 currency=quote.CurrencyCode,
             )
             for name, amount in charges
             if amount
         ],
-        meta=dict(service_name=(service.name or quote.LocalProductName)),
+        meta=dict(service_name=f"DHL {quote.LocalProductName}"),
     )
 
 
 def rate_request(
     payload: models.RateRequest, settings: provider_utils.Settings
 ) -> lib.Serializable:
     packages = lib.to_packages(
```

## karrio/providers/dhl_express/shipment.py

```diff
@@ -130,16 +130,16 @@
             ShipperAccountNumber=settings.account_number,
             ShippingPaymentType=provider_units.PaymentType[payment.paid_by].value,
             BillingAccountNumber=payment.account_number,
             DutyAccountNumber=duty.account_number,
         ),
         Consignee=dhl.Consignee(
             CompanyName=recipient.company_name or "N/A",
-            SuiteDepartmentName=recipient.suite,
-            AddressLine1=lib.text(recipient.street_number, recipient.address_line1),
+            SuiteDepartmentName=None,
+            AddressLine1=recipient.street,
             AddressLine2=lib.text(recipient.address_line2),
             AddressLine3=None,
             City=recipient.city,
             Division=None,
             DivisionCode=recipient.state_code,
             PostalCode=recipient.postal_code,
             CountryCode=recipient.country_code,
@@ -354,17 +354,17 @@
             ParentShipmentIdentificationNumber=None,
             ParentShipmentGlobalProductCode=None,
             ParentShipmentPackagesCount=None,
         ),
         Shipper=dhl.Shipper(
             ShipperID=settings.account_number or "N/A",
             CompanyName=shipper.company_name or "N/A",
-            SuiteDepartmentName=shipper.suite,
+            SuiteDepartmentName=None,
             RegisteredAccount=settings.account_number,
-            AddressLine1=lib.text(shipper.street_number, shipper.address_line1),
+            AddressLine1=shipper.street,
             AddressLine2=lib.join(shipper.address_line2, join=True),
             AddressLine3=None,
             City=shipper.city,
             Division=None,
             DivisionCode=shipper.state_code,
             PostalCode=shipper.postal_code,
             OriginServiceAreaCode=None,
```

## karrio/providers/dhl_express/pickup/create.py

```diff
@@ -90,15 +90,15 @@
             City=address.city,
             StateCode=address.state_code,
             PostalCode=address.postal_code,
             CompanyName=address.company_name,
             CountryCode=address.country_code,
             PackageLocation=payload.package_location,
             LocationType="R" if address.residential else "B",
-            Address1=lib.text(address.street_number, address.address_line1),
+            Address1=address.street,
             Address2=address.address_line2,
         ),
         PickupContact=RequestorContact(
             PersonName=address.contact,
             Phone=address.phone_number,
         ),
         Pickup=Pickup(
```

## Comparing `karrio.dhl_express-2023.4.dist-info/METADATA` & `karrio.dhl_express-2023.4.4.dist-info/METADATA`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: karrio.dhl-express
-Version: 2023.4
+Version: 2023.4.4
 Summary: Karrio - DHL Express Shipping Extension
 Home-page: https://github.com/karrioapi/karrio
 Author: karrio
 Author-email: hello@karrio.io
 License: Apache-2.0
 Platform: UNKNOWN
 Classifier: Intended Audience :: Developers
```

## Comparing `karrio.dhl_express-2023.4.dist-info/RECORD` & `karrio.dhl_express-2023.4.4.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 karrio/mappers/dhl_express/__init__.py,sha256=7cqCCaAnyWiX1gBoftM7u7QZtjl-XKYFQVi4cHGMB8A,576
 karrio/mappers/dhl_express/mapper.py,sha256=M2Px75ARflQDsG94aCl9mDUMsjXmglb0ltvAqD4EtpU,3374
 karrio/mappers/dhl_express/proxy.py,sha256=mD8E1X_UOkD9tWGnNGoR0BKIgArrgnMOZPqzUlCE4RY,1938
 karrio/mappers/dhl_express/settings.py,sha256=2HvIz_cxPTo1hscFGbw_AII834li5NnT8C0JLuf3wrM,447
 karrio/providers/dhl_express/__init__.py,sha256=LalDeH-5sDXL4IEc8QMvm6S3oEOprwQ9g6upfVQCJJw,690
-karrio/providers/dhl_express/address.py,sha256=-AwTxXT8PdAdA-DLjW_vZ356eS7FXKTCfN9h0DLYZFg,2895
+karrio/providers/dhl_express/address.py,sha256=kW7HpbTbvMgpRknr9cljbXUdC36pWdXeC7BhvybsGRE,2855
 karrio/providers/dhl_express/error.py,sha256=HvmPOfCW2SVard58n1FhLQXZZC24-T9c5JFJloZXmGc,642
-karrio/providers/dhl_express/rate.py,sha256=OxmtpJFMMJUmgf0TRvaqq5feyfszsVlpUXIxDQY7E_g,9090
-karrio/providers/dhl_express/shipment.py,sha256=18yRX_sBW-SgKVcoBk5wlJV5x06Wu2ZDhb6n5gK_BBY,18193
+karrio/providers/dhl_express/rate.py,sha256=-UyhEIwhPO7A50wUMmldFKLUrOwmeXHK3p4uBpWrQ94,8912
+karrio/providers/dhl_express/shipment.py,sha256=4CKrLunmJJld7JRLBtDU8llK8B_ZeLUygnDUBAObiQQ,18091
 karrio/providers/dhl_express/tracking.py,sha256=rLmnY1znPOxdQkIJ3nimZUSozjVidG-dRgNDK812M20,3768
 karrio/providers/dhl_express/units.py,sha256=iUPoiclY5JKTqOisGikI2zPBLlH5L9VTSMQeE8gAtcw,26580
 karrio/providers/dhl_express/utils.py,sha256=-jAkpNAZwgRNC09Tsv7f19JF93XKDiknT9Vb85WUfjY,1558
 karrio/providers/dhl_express/pickup/__init__.py,sha256=mKF_9pkJatfdM_CPMI9vwhFI6-R9OFFjXbnNtc_kiu0,307
 karrio/providers/dhl_express/pickup/cancel.py,sha256=5U5609IYDpZKH7DhgDmrSf8oQEBPVQQfFdCGmHIVDWE,2369
-karrio/providers/dhl_express/pickup/create.py,sha256=SnWwiId0dI3RaIAtz9oxYSA142gXyv0vkh7spR1Yubw,4552
+karrio/providers/dhl_express/pickup/create.py,sha256=HtdopvNrnK0PQDA8OdA6FOsfg81nJ2j50AlE0aoOG8Y,4512
 karrio/providers/dhl_express/pickup/update.py,sha256=a7P-dJCwn01alnd_a0I2PUZzbcCCH0ZBHGZsxoRk2oA,4754
-karrio.dhl_express-2023.4.dist-info/METADATA,sha256=OMAihRziPwQWhiRqJvnj2vT-dSiXL0x14EpF85QuXb8,1020
-karrio.dhl_express-2023.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-karrio.dhl_express-2023.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
-karrio.dhl_express-2023.4.dist-info/RECORD,,
+karrio.dhl_express-2023.4.4.dist-info/METADATA,sha256=B9tl3pwGDTtARlqoDR19LldLp4gD9R_fvBQCLAyCqVU,1022
+karrio.dhl_express-2023.4.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+karrio.dhl_express-2023.4.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
+karrio.dhl_express-2023.4.4.dist-info/RECORD,,
```

