# Comparing `tmp/karrio.canadapost-2023.4-py3-none-any.whl.zip` & `tmp/karrio.canadapost-2023.4.4-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 23140 bytes, number of entries: 23
--rw-rw-r--  2.0 unx      572 b- defN 23-Apr-15 11:05 karrio/mappers/canadapost/__init__.py
--rw-rw-r--  2.0 unx     3357 b- defN 23-Apr-01 13:34 karrio/mappers/canadapost/mapper.py
--rw-rw-r--  2.0 unx    10326 b- defN 23-Apr-01 13:38 karrio/mappers/canadapost/proxy.py
--rw-rw-r--  2.0 unx      510 b- defN 23-Apr-15 06:44 karrio/mappers/canadapost/settings.py
+Zip file size: 23135 bytes, number of entries: 23
+-rw-rw-r--  2.0 unx      572 b- defN 23-Apr-23 04:04 karrio/mappers/canadapost/__init__.py
+-rw-rw-r--  2.0 unx     3357 b- defN 23-Apr-23 04:04 karrio/mappers/canadapost/mapper.py
+-rw-rw-r--  2.0 unx    10326 b- defN 23-Apr-23 04:04 karrio/mappers/canadapost/proxy.py
+-rw-rw-r--  2.0 unx      510 b- defN 23-Apr-23 04:04 karrio/mappers/canadapost/settings.py
 -rw-rw-r--  2.0 unx      688 b- defN 22-Nov-15 19:21 karrio/providers/canadapost/__init__.py
 -rw-rw-r--  2.0 unx     1304 b- defN 23-Feb-18 18:30 karrio/providers/canadapost/error.py
--rw-rw-r--  2.0 unx     6253 b- defN 23-Apr-01 15:18 karrio/providers/canadapost/rate.py
--rw-rw-r--  2.0 unx     2769 b- defN 23-Apr-01 15:18 karrio/providers/canadapost/tracking.py
--rw-rw-r--  2.0 unx     8116 b- defN 23-Apr-15 10:53 karrio/providers/canadapost/units.py
--rw-rw-r--  2.0 unx     1447 b- defN 23-Apr-15 11:08 karrio/providers/canadapost/utils.py
+-rw-rw-r--  2.0 unx     6253 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/rate.py
+-rw-rw-r--  2.0 unx     2769 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/tracking.py
+-rw-rw-r--  2.0 unx     8116 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/units.py
+-rw-rw-r--  2.0 unx     1447 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/utils.py
 -rw-rw-r--  2.0 unx      304 b- defN 22-Nov-15 19:21 karrio/providers/canadapost/pickup/__init__.py
--rw-rw-r--  2.0 unx     1001 b- defN 23-Apr-01 15:18 karrio/providers/canadapost/pickup/cancel.py
--rw-rw-r--  2.0 unx     7056 b- defN 23-Apr-01 15:53 karrio/providers/canadapost/pickup/create.py
--rw-rw-r--  2.0 unx     1675 b- defN 23-Apr-01 15:18 karrio/providers/canadapost/pickup/update.py
+-rw-rw-r--  2.0 unx     1001 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/pickup/cancel.py
+-rw-rw-r--  2.0 unx     7056 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/pickup/create.py
+-rw-rw-r--  2.0 unx     1675 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/pickup/update.py
 -rw-rw-r--  2.0 unx      236 b- defN 22-Nov-15 19:21 karrio/providers/canadapost/shipment/__init__.py
--rw-rw-r--  2.0 unx     2467 b- defN 23-Apr-01 15:18 karrio/providers/canadapost/shipment/cancel.py
--rw-rw-r--  2.0 unx    10735 b- defN 23-Apr-15 10:53 karrio/providers/canadapost/shipment/contract.py
--rw-rw-r--  2.0 unx     2135 b- defN 23-Apr-01 15:18 karrio/providers/canadapost/shipment/create.py
--rw-rw-r--  2.0 unx     8228 b- defN 23-Apr-01 15:57 karrio/providers/canadapost/shipment/non_contract.py
--rw-rw-r--  2.0 unx     1014 b- defN 23-Apr-18 07:09 karrio.canadapost-2023.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Apr-18 07:09 karrio.canadapost-2023.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        7 b- defN 23-Apr-18 07:09 karrio.canadapost-2023.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2203 b- defN 23-Apr-18 07:09 karrio.canadapost-2023.4.dist-info/RECORD
-23 files, 72495 bytes uncompressed, 19462 bytes compressed:  73.2%
+-rw-rw-r--  2.0 unx     2467 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/shipment/cancel.py
+-rw-rw-r--  2.0 unx    10307 b- defN 23-May-17 00:17 karrio/providers/canadapost/shipment/contract.py
+-rw-rw-r--  2.0 unx     2135 b- defN 23-Apr-23 04:04 karrio/providers/canadapost/shipment/create.py
+-rw-rw-r--  2.0 unx     7946 b- defN 23-May-17 00:17 karrio/providers/canadapost/shipment/non_contract.py
+-rw-rw-r--  2.0 unx     1016 b- defN 23-May-20 11:14 karrio.canadapost-2023.4.4.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-May-20 11:14 karrio.canadapost-2023.4.4.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        7 b- defN 23-May-20 11:14 karrio.canadapost-2023.4.4.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2211 b- defN 23-May-20 11:14 karrio.canadapost-2023.4.4.dist-info/RECORD
+23 files, 71795 bytes uncompressed, 19441 bytes compressed:  72.9%
```

## zipnote {}

```diff
@@ -51,20 +51,20 @@
 
 Filename: karrio/providers/canadapost/shipment/create.py
 Comment: 
 
 Filename: karrio/providers/canadapost/shipment/non_contract.py
 Comment: 
 
-Filename: karrio.canadapost-2023.4.dist-info/METADATA
+Filename: karrio.canadapost-2023.4.4.dist-info/METADATA
 Comment: 
 
-Filename: karrio.canadapost-2023.4.dist-info/WHEEL
+Filename: karrio.canadapost-2023.4.4.dist-info/WHEEL
 Comment: 
 
-Filename: karrio.canadapost-2023.4.dist-info/top_level.txt
+Filename: karrio.canadapost-2023.4.4.dist-info/top_level.txt
 Comment: 
 
-Filename: karrio.canadapost-2023.4.dist-info/RECORD
+Filename: karrio.canadapost-2023.4.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## karrio/providers/canadapost/shipment/contract.py

```diff
@@ -65,27 +65,28 @@
     )
 
 
 def shipment_request(
     payload: models.ShipmentRequest,
     settings: provider_utils.Settings,
 ) -> lib.Serializable:
+    shipper = lib.to_address(payload.shipper)
+    recipient = lib.to_address(payload.recipient)
     service = provider_units.ServiceType.map(payload.service).value_or_key
     package = lib.to_packages(
         payload.parcels,
         provider_units.PackagePresets,
         required=["weight"],
         package_option_type=provider_units.ShippingOption,
     ).single
     options = lib.to_shipping_options(
         options=payload.options,
         package_options=package.options,
         is_international=(
-            payload.recipient.country_code is not None
-            and payload.recipient.country_code != "CA"
+            recipient.country_code is not None and recipient.country_code != "CA"
         ),
         initializer=provider_units.shipping_options_initializer,
     )
 
     customs = lib.to_customs_info(payload.customs)
     duty = getattr(customs, "duty", None) or models.Duty()
     label_encoding, label_format = provider_units.LabelType[
@@ -94,55 +95,51 @@
 
     request = ShipmentType(
         customer_request_id=None,
         groupIdOrTransmitShipment=groupIdOrTransmitShipment(),
         quickship_label_requested=None,
         cpc_pickup_indicator=None,
         requested_shipping_point=provider_utils.format_ca_postal_code(
-            payload.shipper.postal_code
+            shipper.postal_code
         ),
         shipping_point_id=None,
         expected_mailing_date=options.shipment_date.state,
         provide_pricing_info=True,
         provide_receipt_info=None,
         delivery_spec=DeliverySpecType(
             service_code=service,
             sender=SenderType(
-                name=payload.shipper.person_name,
-                company=(payload.shipper.company_name or "Not Applicable"),
-                contact_phone=(payload.shipper.phone_number or "000 000 0000"),
+                name=shipper.person_name,
+                company=(shipper.company_name or "Not Applicable"),
+                contact_phone=(shipper.phone_number or "000 000 0000"),
                 address_details=AddressDetailsType(
-                    city=payload.shipper.city,
-                    prov_state=payload.shipper.state_code,
-                    country_code=payload.shipper.country_code,
+                    city=shipper.city,
+                    prov_state=shipper.state_code,
+                    country_code=shipper.country_code,
                     postal_zip_code=provider_utils.format_ca_postal_code(
-                        payload.shipper.postal_code
+                        shipper.postal_code
                     ),
-                    address_line_1=lib.text(
-                        payload.shipper.street_number, payload.shipper.address_line1
-                    ),
-                    address_line_2=lib.text(payload.shipper.address_line2),
+                    address_line_1=shipper.street,
+                    address_line_2=lib.text(shipper.address_line2),
                 ),
             ),
             destination=DestinationType(
-                name=payload.recipient.person_name,
-                company=payload.recipient.company_name,
+                name=recipient.person_name,
+                company=recipient.company_name,
                 additional_address_info=None,
-                client_voice_number=payload.recipient.phone_number or "000 000 0000",
+                client_voice_number=recipient.phone_number or "000 000 0000",
                 address_details=DestinationAddressDetailsType(
-                    city=payload.recipient.city,
-                    prov_state=payload.recipient.state_code,
-                    country_code=payload.recipient.country_code,
+                    city=recipient.city,
+                    prov_state=recipient.state_code,
+                    country_code=recipient.country_code,
                     postal_zip_code=provider_utils.format_ca_postal_code(
-                        payload.recipient.postal_code
-                    ),
-                    address_line_1=lib.text(
-                        payload.recipient.street_number, payload.recipient.address_line1
+                        recipient.postal_code
                     ),
-                    address_line_2=lib.text(payload.recipient.address_line2),
+                    address_line_1=recipient.street,
+                    address_line_2=lib.text(recipient.address_line2),
                 ),
             ),
             parcel_characteristics=ParcelCharacteristicsType(
                 weight=package.weight.map(provider_units.MeasurementOptions).KG,
                 dimensions=dimensionsType(
                     length=package.length.map(provider_units.MeasurementOptions).CM,
                     width=package.width.map(provider_units.MeasurementOptions).CM,
@@ -164,23 +161,21 @@
                     ]
                 )
                 if any(options.items())
                 else None
             ),
             notification=(
                 NotificationType(
-                    email=(
-                        options.email_notification_to.state or payload.recipient.email
-                    ),
+                    email=(options.email_notification_to.state or recipient.email),
                     on_shipment=True,
                     on_exception=True,
                     on_delivery=True,
                 )
                 if options.email_notification.state
-                and any([options.email_notification_to.state, payload.recipient.email])
+                and any([options.email_notification_to.state, recipient.email])
                 else None
             ),
             print_preferences=PrintPreferencesType(
                 output_format=label_format,
                 encoding=label_encoding,
             ),
             preferences=PreferencesType(
@@ -213,19 +208,17 @@
                                     ),
                                     sku=item.sku or "0000",
                                     hs_tariff_code=item.hs_code,
                                     unit_weight=(item.weight or 1),
                                     customs_value_per_unit=item.value_amount,
                                     customs_unit_of_measure=None,
                                     country_of_origin=(
-                                        item.origin_country
-                                        or payload.shipper.country_code
+                                        item.origin_country or shipper.country_code
                                     ),
-                                    province_of_origin=payload.shipper.state_code
-                                    or "N/B",
+                                    province_of_origin=shipper.state_code or "N/B",
                                 )
                                 for item in customs.commodities
                             ]
                         )
                     )
                     if any(customs.commodities or [])
                     else None,
```

## karrio/providers/canadapost/shipment/non_contract.py

```diff
@@ -40,67 +40,64 @@
         meta=dict(
             carrier_tracking_link=settings.tracking_url.format(info.tracking_pin),
         ),
     )
 
 
 def shipment_request(payload: models.ShipmentRequest, _) -> lib.Serializable:
+    shipper = lib.to_address(payload.shipper)
+    recipient = lib.to_address(payload.recipient)
     service = provider_units.ServiceType.map(payload.service).value_or_key
     customs = lib.to_customs_info(payload.customs)
     package = lib.to_packages(
         payload.parcels,
         provider_units.PackagePresets,
         required=["weight"],
         package_option_type=provider_units.ShippingOption,
     ).single
     options = lib.to_shipping_options(
         options=payload.options,
         package_options=package.options,
         is_international=(
-            payload.recipient.country_code is not None
-            and payload.recipient.country_code != "CA"
+            recipient.country_code is not None and recipient.country_code != "CA"
         ),
         initializer=provider_units.shipping_options_initializer,
     )
 
     request = canadapost.NonContractShipmentType(
         requested_shipping_point=None,
         delivery_spec=canadapost.DeliverySpecType(
             service_code=service,
             sender=canadapost.SenderType(
-                name=payload.shipper.person_name,
-                company=payload.shipper.company_name,
-                contact_phone=payload.shipper.phone_number,
+                name=shipper.person_name,
+                company=shipper.company_name,
+                contact_phone=shipper.phone_number,
                 address_details=canadapost.DomesticAddressDetailsType(
-                    address_line_1=lib.text(
-                        payload.shipper.street_number, payload.shipper.address_line1
-                    ),
-                    address_line_2=lib.text(payload.shipper.address_line2),
-                    city=payload.shipper.city,
-                    prov_state=payload.shipper.state_code,
+                    address_line_1=shipper.street,
+                    address_line_2=lib.text(shipper.address_line2),
+                    city=shipper.city,
+                    prov_state=shipper.state_code,
                     postal_zip_code=provider_utils.format_ca_postal_code(
-                        payload.shipper.postal_code
+                        shipper.postal_code
                     ),
                 ),
             ),
             destination=canadapost.DestinationType(
-                name=payload.recipient.person_name,
-                company=payload.recipient.company_name,
+                name=recipient.person_name,
+                company=recipient.company_name,
                 additional_address_info=None,
-                client_voice_number=payload.recipient.phone_number,
+                client_voice_number=recipient.phone_number,
                 address_details=canadapost.DestinationAddressDetailsType(
-                    address_line_1=lib.text(
-                        payload.recipient.street_number, payload.recipient.address_line1
-                    ),
-                    address_line_2=lib.text(payload.recipient.address_line2),
-                    city=payload.recipient.city,
-                    prov_state=payload.recipient.state_code,
-                    country_code=payload.recipient.country_code,
+                    address_line_1=recipient.street,
+                    address_line_2=lib.text(recipient.address_line2),
+                    city=recipient.city,
+                    prov_state=recipient.state_code,
+                    country_code=recipient.country_code,
                     postal_zip_code=provider_utils.format_ca_postal_code(
-                        payload.recipient.postal_code
+                        recipient.postal_code
                     ),
                 ),
             ),
             options=(
                 canadapost.optionsType(
                     option=[
                         canadapost.OptionType(
@@ -123,20 +120,20 @@
                     height=lib.to_decimal(package.height.CM, 0.1),
                 ),
                 unpackaged=None,
                 mailing_tube=None,
             ),
             notification=(
                 canadapost.NotificationType(
-                    email=options.notification_email.state or payload.recipient.email,
+                    email=options.notification_email.state or recipient.email,
                     on_shipment=True,
                     on_exception=True,
                     on_delivery=True,
                 )
-                if any([options.notification_email.state, payload.recipient.email])
+                if any([options.notification_email.state, recipient.email])
                 else None
             ),
             preferences=canadapost.PreferencesType(
                 show_packing_instructions=False,
                 show_postage_rate=True,
                 show_insured_value=True,
             ),
@@ -165,15 +162,15 @@
                                     item.title or item.description, max=35
                                 ),
                                 sku=item.sku,
                                 hs_tariff_code=item.hs_code,
                                 unit_weight=units.WeightUnit.KG.value,
                                 customs_value_per_unit=item.value_amount,
                                 customs_unit_of_measure=None,
-                                country_of_origin=payload.shipper.country_code,
+                                country_of_origin=shipper.country_code,
                                 province_of_origin=None,
                             )
                             for item in customs.commodities or []
                         ]
                     ),
                 )
                 if customs.is_defined
```

## Comparing `karrio.canadapost-2023.4.dist-info/METADATA` & `karrio.canadapost-2023.4.4.dist-info/METADATA`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: karrio.canadapost
-Version: 2023.4
+Version: 2023.4.4
 Summary: Karrio - Canada Post Shipping Extension
 Home-page: https://github.com/karrioapi/karrio
 Author: karrio
 Author-email: hello@karrio.io
 License: Apache-2.0
 Platform: UNKNOWN
 Classifier: Intended Audience :: Developers
```

## Comparing `karrio.canadapost-2023.4.dist-info/RECORD` & `karrio.canadapost-2023.4.4.dist-info/RECORD`

 * *Files 16% similar despite different names*

```diff
@@ -10,14 +10,14 @@
 karrio/providers/canadapost/utils.py,sha256=teT0hKrQs7_s7LgoL-RZagQv7ETCeZQ9NPp70U7HWGY,1447
 karrio/providers/canadapost/pickup/__init__.py,sha256=uLN8GzjaW1ezPty1NxIKKFouHwkMGeYsdK_yAg7OwxE,304
 karrio/providers/canadapost/pickup/cancel.py,sha256=io3_KxVzwAkH1zcIc1ycPwf_Up16mI_pgT84BCu0P3k,1001
 karrio/providers/canadapost/pickup/create.py,sha256=oBdmlodve9cyaQMZVT1fwT6reuHjJ7ftKonFemriB6o,7056
 karrio/providers/canadapost/pickup/update.py,sha256=S0SfblN6LPkSl_1SyVmuELJIqOPEuKLFFzwYU3fs0K0,1675
 karrio/providers/canadapost/shipment/__init__.py,sha256=kITqJglgqlnoHrBdCr8iQXugr0PfZwaoTK9kiuYlkGQ,236
 karrio/providers/canadapost/shipment/cancel.py,sha256=swI8kAgTPwWIEvJHx4Y9FJRQTtHZD-SAhTIZkZSZ08w,2467
-karrio/providers/canadapost/shipment/contract.py,sha256=zhPgBC-GWCebipKCVkJSRbH0TeBEqwi6CjPJEjsoTb8,10735
+karrio/providers/canadapost/shipment/contract.py,sha256=7_l9dV6WzfeoVyNYBQVh8wiE3OE6zSDsuwf7zjqHU8A,10307
 karrio/providers/canadapost/shipment/create.py,sha256=VV-FM-d0qjjT-RbMqVcDNvgOKSVrGKY3yGAH90-XtSU,2135
-karrio/providers/canadapost/shipment/non_contract.py,sha256=GTB5mLKMovUsL-aOJsLZ6QJgE4JmWdOpauccAR0V3SU,8228
-karrio.canadapost-2023.4.dist-info/METADATA,sha256=f26stDFL1wXddUnoJQUDCpvJFg5h6_lP2qyFDdOJPwA,1014
-karrio.canadapost-2023.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-karrio.canadapost-2023.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
-karrio.canadapost-2023.4.dist-info/RECORD,,
+karrio/providers/canadapost/shipment/non_contract.py,sha256=uF99t7ePU2Pm7u0bNxsZapVDrGF0gPZrRQHxul9z5I0,7946
+karrio.canadapost-2023.4.4.dist-info/METADATA,sha256=a1dYTxvFmfskPhi-OV3g--43SQsX5h_uLGbiqJ7eNBM,1016
+karrio.canadapost-2023.4.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+karrio.canadapost-2023.4.4.dist-info/top_level.txt,sha256=mfkVZXzNuVRmA7NRlck_Ub-C8Zgtqxbx3gX1Rq_W-i0,7
+karrio.canadapost-2023.4.4.dist-info/RECORD,,
```

