# Comparing `tmp/odoo_addon_stock_owner_restriction-15.0.1.1.0.1-py3-none-any.whl.zip` & `tmp/odoo_addon_stock_owner_restriction-16.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 31237 bytes, number of entries: 25
--rw-r--r--  2.0 unx     4573 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/README.rst
--rw-r--r--  2.0 unx      635 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/__init__.py
--rw-r--r--  2.0 unx      727 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/__manifest__.py
--rw-r--r--  2.0 unx     2763 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/i18n/es.po
--rw-r--r--  2.0 unx     2296 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/i18n/stock_owner_restriction.pot
--rw-r--r--  2.0 unx      199 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/models/__init__.py
--rw-r--r--  2.0 unx     1481 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/models/product.py
--rw-r--r--  2.0 unx     2335 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/models/stock_move.py
--rw-r--r--  2.0 unx      337 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/models/stock_picking.py
--rw-r--r--  2.0 unx      606 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/models/stock_picking_type.py
--rw-r--r--  2.0 unx     2226 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/models/stock_quant.py
--rw-r--r--  2.0 unx      377 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      133 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      190 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     1139 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/static/description/icon.png
--rw-r--r--  2.0 unx    14553 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/static/description/index.html
--rw-r--r--  2.0 unx      108 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/tests/__init__.py
--rw-r--r--  2.0 unx     7229 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/tests/test_stock_owner_restriction.py
--rw-r--r--  2.0 unx      547 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/views/stock_picking_type_views.xml
--rw-r--r--  2.0 unx      709 b- defN 23-May-20 10:49 odoo/addons/stock_owner_restriction/views/stock_picking_views.xml
--rw-r--r--  2.0 unx     5192 b- defN 23-May-20 10:49 odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-20 10:49 odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-20 10:49 odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2835 b- defN 23-May-20 10:49 odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/RECORD
-25 files, 60742 bytes uncompressed, 26357 bytes compressed:  56.6%
+Zip file size: 31272 bytes, number of entries: 25
+-rw-r--r--  2.0 unx     4573 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/README.rst
+-rw-r--r--  2.0 unx      635 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/__init__.py
+-rw-r--r--  2.0 unx      727 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/__manifest__.py
+-rw-r--r--  2.0 unx     2494 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/i18n/es.po
+-rw-r--r--  2.0 unx     2078 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/i18n/stock_owner_restriction.pot
+-rw-r--r--  2.0 unx      199 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/models/__init__.py
+-rw-r--r--  2.0 unx     1481 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/models/product.py
+-rw-r--r--  2.0 unx     2698 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/models/stock_move.py
+-rw-r--r--  2.0 unx      337 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/models/stock_picking.py
+-rw-r--r--  2.0 unx      528 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/models/stock_picking_type.py
+-rw-r--r--  2.0 unx     2226 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/models/stock_quant.py
+-rw-r--r--  2.0 unx      377 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      133 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      190 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     1139 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/static/description/icon.png
+-rw-r--r--  2.0 unx    14553 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/static/description/index.html
+-rw-r--r--  2.0 unx      108 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/tests/__init__.py
+-rw-r--r--  2.0 unx     5884 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/tests/test_stock_owner_restriction.py
+-rw-r--r--  2.0 unx      547 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/views/stock_picking_type_views.xml
+-rw-r--r--  2.0 unx      709 b- defN 23-May-14 16:27 odoo/addons/stock_owner_restriction/views/stock_picking_views.xml
+-rw-r--r--  2.0 unx     5193 b- defN 23-May-14 16:27 odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-14 16:27 odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-14 16:27 odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2835 b- defN 23-May-14 16:27 odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/RECORD
+25 files, 59196 bytes uncompressed, 26392 bytes compressed:  55.4%
```

## zipnote {}

```diff
@@ -57,20 +57,20 @@
 
 Filename: odoo/addons/stock_owner_restriction/views/stock_picking_type_views.xml
 Comment: 
 
 Filename: odoo/addons/stock_owner_restriction/views/stock_picking_views.xml
 Comment: 
 
-Filename: odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/METADATA
+Filename: odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/WHEEL
+Filename: odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/top_level.txt
+Filename: odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/RECORD
+Filename: odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_owner_restriction/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstock--logistics--workflow-lightgray.png?logo=github
-    :target: https://github.com/OCA/stock-logistics-workflow/tree/15.0/stock_owner_restriction
+    :target: https://github.com/OCA/stock-logistics-workflow/tree/16.0/stock_owner_restriction
     :alt: OCA/stock-logistics-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/stock-logistics-workflow-15-0/stock-logistics-workflow-15-0-stock_owner_restriction
+    :target: https://translation.odoo-community.org/projects/stock-logistics-workflow-16-0/stock-logistics-workflow-16-0-stock_owner_restriction
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/154/15.0
+    :target: https://runbot.odoo-community.org/runbot/154/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module extends the functionality of stock module to allow restriction
 of product quantities (quants) for stock operations such as reserve quantities
 or product quantity available info.
@@ -88,15 +88,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/stock-logistics-workflow/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/stock-logistics-workflow/issues/new?body=module:%20stock_owner_restriction%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/stock-logistics-workflow/issues/new?body=module:%20stock_owner_restriction%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -123,10 +123,10 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/stock-logistics-workflow <https://github.com/OCA/stock-logistics-workflow/tree/15.0/stock_owner_restriction>`_ project on GitHub.
+This module is part of the `OCA/stock-logistics-workflow <https://github.com/OCA/stock-logistics-workflow/tree/16.0/stock_owner_restriction>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/stock_owner_restriction/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2020 Carlos Dauden - Tecnativa
 # Copyright 2020 Sergio Teruel - Tecnativa
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Stock Owner Restriction",
     "summary": "Do not reserve quantity with assigned owner",
-    "version": "15.0.1.1.0",
+    "version": "16.0.1.0.0",
     "development_status": "Beta",
     "category": "stock",
     "website": "https://github.com/OCA/stock-logistics-workflow",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "installable": True,
     "data": ["views/stock_picking_type_views.xml", "views/stock_picking_views.xml"],
```

## odoo/addons/stock_owner_restriction/i18n/es.po

```diff
@@ -16,16 +16,16 @@
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
 "X-Generator: Poedit 2.3\n"
 
 #. module: stock_owner_restriction
 #: model:ir.model.fields,field_description:stock_owner_restriction.field_stock_picking__owner_restriction
 #: model:ir.model.fields,field_description:stock_owner_restriction.field_stock_picking_type__owner_restriction
-msgid "Owner Restriction"
-msgstr ""
+msgid "Owner restriction"
+msgstr "Restricción de cantidad disponible"
 
 #. module: stock_owner_restriction
 #: model_terms:ir.ui.view,arch_db:stock_owner_restriction.view_picking_type_form
 msgid "Owner settings"
 msgstr "Configuración de propietario"
 
 #. module: stock_owner_restriction
@@ -35,19 +35,14 @@
 
 #. module: stock_owner_restriction
 #: model:ir.model.fields.selection,name:stock_owner_restriction.selection__stock_picking_type__owner_restriction__picking_partner
 msgid "Picking partner"
 msgstr "Dirección de entrega del albarán"
 
 #. module: stock_owner_restriction
-#: model:ir.model.fields.selection,name:stock_owner_restriction.selection__stock_picking_type__owner_restriction__partner_or_unassigned
-msgid "Picking partner or unassigned owner"
-msgstr ""
-
-#. module: stock_owner_restriction
 #: model:ir.model,name:stock_owner_restriction.model_product_product
 msgid "Product"
 msgstr "Producto"
 
 #. module: stock_owner_restriction
 #: model:ir.model,name:stock_owner_restriction.model_stock_quant
 msgid "Quants"
@@ -68,10 +63,7 @@
 msgid "Transfer"
 msgstr "Transferir"
 
 #. module: stock_owner_restriction
 #: model:ir.model.fields.selection,name:stock_owner_restriction.selection__stock_picking_type__owner_restriction__unassigned_owner
 msgid "Unassigned owner"
 msgstr "Propietario no asignado"
-
-#~ msgid "Owner restriction"
-#~ msgstr "Restricción de cantidad disponible"
```

## odoo/addons/stock_owner_restriction/i18n/stock_owner_restriction.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* stock_owner_restriction
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -31,21 +31,16 @@
 
 #. module: stock_owner_restriction
 #: model:ir.model.fields.selection,name:stock_owner_restriction.selection__stock_picking_type__owner_restriction__picking_partner
 msgid "Picking partner"
 msgstr ""
 
 #. module: stock_owner_restriction
-#: model:ir.model.fields.selection,name:stock_owner_restriction.selection__stock_picking_type__owner_restriction__partner_or_unassigned
-msgid "Picking partner or unassigned owner"
-msgstr ""
-
-#. module: stock_owner_restriction
 #: model:ir.model,name:stock_owner_restriction.model_product_product
-msgid "Product"
+msgid "Product Variant"
 msgstr ""
 
 #. module: stock_owner_restriction
 #: model:ir.model,name:stock_owner_restriction.model_stock_quant
 msgid "Quants"
 msgstr ""
```

## odoo/addons/stock_owner_restriction/models/stock_move.py

```diff
@@ -5,46 +5,51 @@
 
 from odoo import models
 
 
 class StockMove(models.Model):
     _inherit = "stock.move"
 
-    def _action_assign(self):
-        # Split moves by picking type owner behavior restriction to process
-        # moves depending of their owners
-        moves = self.filtered(
+    def _get_moves_to_assign_with_standard_behavior(self):
+        """This method is expected to be extended as necessary. e.g. you may not want to
+        handle subcontracting receipts (whose picking type is normal incoming receipt
+        unless configured otherwise) with standard behavior, and you can filter out
+        those moves.
+        """
+        return self.filtered(
             lambda m: m.picking_type_id.owner_restriction == "standard_behavior"
         )
-        res = super(StockMove, moves)._action_assign()
+
+    def _get_owner_for_assign(self):
+        """This method is expected to be extended as necessary. e.g. different logic
+        needs to be applied for moves in manufacturing orders.
+        """
+        self.ensure_one()
+        partner = self.move_dest_ids.picking_id.owner_id
+        if not partner:
+            partner = self.picking_id.owner_id or self.picking_id.partner_id
+        return partner
+
+    def _action_assign(self, force_qty=False):
+        # Split moves by picking type owner behavior restriction to process
+        # moves depending of their owners
+        moves = self._get_moves_to_assign_with_standard_behavior()
+        res = super(StockMove, moves)._action_assign(force_qty=force_qty)
         dict_key = defaultdict(lambda: self.env["stock.move"])
         for move in self - moves:
             if move.picking_type_id.owner_restriction == "unassigned_owner":
                 dict_key[False] |= move
             else:
-                dict_key[move.picking_id.owner_id or move.picking_id.partner_id] |= move
+                partner = move._get_owner_for_assign()
+                dict_key[partner] |= move
         for owner_id, moves_to_assign in dict_key.items():
             super(
                 StockMove,
                 moves_to_assign.with_context(force_restricted_owner_id=owner_id),
-            )._action_assign()
-            if (
-                owner_id
-                and moves_to_assign.picking_type_id.owner_restriction
-                == "partner_or_unassigned"
-                and sum(
-                    move.reserved_availability - move.product_uom_qty
-                    for move in moves_to_assign
-                )
-                < 0
-            ):
-                super(
-                    StockMove,
-                    moves_to_assign.with_context(force_restricted_owner_id=False),
-                )._action_assign()
+            )._action_assign(force_qty=force_qty)
         return res
 
     def _update_reserved_quantity(
         self,
         need,
         available_quantity,
         location_id,
```

## odoo/addons/stock_owner_restriction/models/stock_picking_type.py

```diff
@@ -8,11 +8,10 @@
     _inherit = "stock.picking.type"
 
     owner_restriction = fields.Selection(
         [
             ("standard_behavior", "Standard behavior"),
             ("unassigned_owner", "Unassigned owner"),
             ("picking_partner", "Picking partner"),
-            ("partner_or_unassigned", "Picking partner or unassigned owner"),
         ],
         default="standard_behavior",
     )
```

## odoo/addons/stock_owner_restriction/static/description/index.html

### odoo/addons/stock_owner_restriction/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/tree/15.0/stock_owner_restriction">
+        <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/tree/16.0/stock_owner_restriction">
           <img alt="OCA/stock-logistics-workflow" src="https://img.shields.io/badge/github-OCA%2Fstock--logistics--workflow-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/stock-logistics-workflow-15-0/stock-logistics-workflow-15-0-stock_owner_restriction">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/stock-logistics-workflow-16-0/stock-logistics-workflow-16-0-stock_owner_restriction">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/154/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/154/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>This module extends the functionality of stock module to allow restriction
 of product quantities (quants) for stock operations such as reserve quantities
 or product quantity available info.</p>
       <p>
@@ -510,15 +510,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/issues/new?body=module:%20stock_owner_restriction%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/issues/new?body=module:%20stock_owner_restriction%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id4">Credits</a>
@@ -561,15 +561,15 @@
             <img alt="Odoo Community Association" src="https://odoo-community.org/logo.png"/>
           </a>
           <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/tree/15.0/stock_owner_restriction">OCA/stock-logistics-workflow</a>
+            <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/tree/16.0/stock_owner_restriction">OCA/stock-logistics-workflow</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/stock_owner_restriction/tests/test_stock_owner_restriction.py

```diff
@@ -12,17 +12,15 @@
         # models
         cls.picking_model = cls.env["stock.picking"]
         cls.move_model = cls.env["stock.move"]
         cls.ResPartner = cls.env["res.partner"]
 
         # warehouse and picking types
         cls.warehouse = cls.env.ref("stock.stock_warehouse_shop0")
-        cls.picking_type_in = cls.env.ref("stock.chi_picking_type_in")
         cls.picking_type_out = cls.env.ref("stock.chi_picking_type_out")
-        cls.supplier_location = cls.env.ref("stock.stock_location_suppliers")
         cls.customer_location = cls.env.ref("stock.stock_location_customers")
 
         # Allow all companies for OdooBot user and set default user company
         # to warehouse company
         companies = cls.env["res.company"].search([])
         cls.env.user.company_ids = [(6, 0, companies.ids)]
         cls.env.user.company_id = cls.warehouse.company_id
@@ -56,15 +54,15 @@
                 "location_dest_id": cls.customer_location.id,
             }
         )
 
     def test_product_qty_available(self):
         # Quants with owner assigned are not available
         self.assertEqual(self.product.qty_available, 500.00)
-        self.product.invalidate_cache()
+        self.product.invalidate_model()
         self.assertEqual(
             self.product.with_context(skip_restricted_owner=True).qty_available, 1000.00
         )
 
     def test_restrict_reserve_qty(self):
         # Restrict quants from one owner to other customer
         self.move_model.create(
@@ -82,72 +80,51 @@
         # Set restriction options on picking type
         self.picking_type_out.owner_restriction = "standard_behavior"
         self.picking_out.action_confirm()
         self.picking_out.action_assign()
         # For standard_behavior Odoo does not take into account the owner in
         # quants, so Odoo has been reserved 500 quantities without owner and
         # 500 quantities with owner
-        self.assertEqual(self.picking_out.move_lines.reserved_availability, 1000.00)
+        self.assertEqual(self.picking_out.move_ids.reserved_availability, 1000.00)
         self.assertEqual(len(self.picking_out.move_line_ids), 2)
         self.assertEqual(self.picking_out.move_line_ids.mapped("owner_id"), self.owner)
 
         # Set restriction options on picking type to get only quants without
         # owner assigned
         self.picking_type_out.owner_restriction = "unassigned_owner"
         self.picking_out.do_unreserve()
         self.picking_out.action_assign()
-        self.assertEqual(self.picking_out.move_lines.reserved_availability, 500.00)
+        self.assertEqual(self.picking_out.move_ids.reserved_availability, 500.00)
         self.assertEqual(len(self.picking_out.move_line_ids), 1)
         self.assertFalse(self.picking_out.move_line_ids.mapped("owner_id"))
 
         # Set restriction options on picking type to get only quants with an
         # owner assigned.
         # The picking partner has not quants assigned so the picking is in
         # confirm state
         self.picking_type_out.owner_restriction = "picking_partner"
         self.picking_out.do_unreserve()
         self.picking_out.action_assign()
-        self.assertEqual(self.picking_out.move_lines.reserved_availability, 0.0)
+        self.assertEqual(self.picking_out.move_ids.reserved_availability, 0.0)
         self.assertEqual(len(self.picking_out.move_line_ids), 0)
         self.assertEqual(self.picking_out.state, "confirmed")
 
         # Set restriction options on picking type to get only quants with an
         # owner assigned.
         # The picking partner has quants assigned so the picking is in
         # assigned state
         self.picking_type_out.owner_restriction = "picking_partner"
         self.picking_out.partner_id = self.owner
         self.picking_out.do_unreserve()
         self.picking_out.action_assign()
-        self.assertEqual(self.picking_out.move_lines.reserved_availability, 500.00)
+        self.assertEqual(self.picking_out.move_ids.reserved_availability, 500.00)
         self.assertEqual(len(self.picking_out.move_line_ids), 1)
         self.assertTrue(self.picking_out.move_line_ids.mapped("owner_id"))
         self.assertEqual(self.picking_out.state, "assigned")
 
-        # Set restriction options on picking type to get only quants with an
-        # owner assigned.
-        # The picking partner has quants assigned and there ara unassigned quants
-        # so the picking is in assigned state and with 1000 reserved units
-        self.picking_type_out.owner_restriction = "partner_or_unassigned"
-        self.picking_out.do_unreserve()
-        self.picking_out.action_assign()
-        self.assertEqual(self.picking_out.move_lines.reserved_availability, 1000.00)
-        self.assertEqual(len(self.picking_out.move_line_ids), 2)
-        self.assertEqual(self.picking_out.move_line_ids.mapped("owner_id"), self.owner)
-
-        # Set restriction options on picking type to get only quants with an
-        # owner assigned.
-        # The picking partner has not quants assigned but there are unassigned quants
-        # so the picking is in assigned state with 500 reserved units
-        self.picking_out.partner_id = False
-        self.picking_out.do_unreserve()
-        self.picking_out.action_assign()
-        self.assertEqual(self.picking_out.move_lines.reserved_availability, 500.00)
-        self.assertEqual(len(self.picking_out.move_line_ids), 1)
-
     def test_search_qty(self):
         products = self.env["product.product"].search(
             [("id", "=", self.product.id), ("qty_available", ">", 500.00)]
         )
         self.assertFalse(products)
         products = self.env["product.product"].search(
             [("id", "=", self.product.id), ("qty_available", ">", 499.00)]
```

## Comparing `odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/METADATA` & `odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 Metadata-Version: 2.1
 Name: odoo-addon-stock-owner-restriction
-Version: 15.0.1.1.0.1
+Version: 16.0.1.0.0.2
 Summary: Do not reserve quantity with assigned owner
 Home-page: https://github.com/OCA/stock-logistics-workflow
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Classifier: Development Status :: 4 - Beta
-Requires-Python: >=3.8
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 
 =======================
 Stock Owner Restriction
 =======================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
@@ -27,21 +27,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstock--logistics--workflow-lightgray.png?logo=github
-    :target: https://github.com/OCA/stock-logistics-workflow/tree/15.0/stock_owner_restriction
+    :target: https://github.com/OCA/stock-logistics-workflow/tree/16.0/stock_owner_restriction
     :alt: OCA/stock-logistics-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/stock-logistics-workflow-15-0/stock-logistics-workflow-15-0-stock_owner_restriction
+    :target: https://translation.odoo-community.org/projects/stock-logistics-workflow-16-0/stock-logistics-workflow-16-0-stock_owner_restriction
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/154/15.0
+    :target: https://runbot.odoo-community.org/runbot/154/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module extends the functionality of stock module to allow restriction
 of product quantities (quants) for stock operations such as reserve quantities
 or product quantity available info.
@@ -105,15 +105,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/stock-logistics-workflow/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/stock-logistics-workflow/issues/new?body=module:%20stock_owner_restriction%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/stock-logistics-workflow/issues/new?body=module:%20stock_owner_restriction%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -140,12 +140,12 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/stock-logistics-workflow <https://github.com/OCA/stock-logistics-workflow/tree/15.0/stock_owner_restriction>`_ project on GitHub.
+This module is part of the `OCA/stock-logistics-workflow <https://github.com/OCA/stock-logistics-workflow/tree/16.0/stock_owner_restriction>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/RECORD` & `odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,25 +1,25 @@
-odoo/addons/stock_owner_restriction/README.rst,sha256=mr6M-24WrDwBnUhvIAKwZEZEudaiPzbi_5m7Pw75-Lw,4573
+odoo/addons/stock_owner_restriction/README.rst,sha256=YIY5o5sIBpZAjjqkF-CXm6VQDfNPjhAUs6dZb2qiqBU,4573
 odoo/addons/stock_owner_restriction/__init__.py,sha256=lAP-74tJHX-EJlksaLRkvyHiDc92EHLwLlh4H7cXyhU,635
-odoo/addons/stock_owner_restriction/__manifest__.py,sha256=nrheeTNiCbQKBbis1tufSc7-tBwlDG_g6_A-rByrHvs,727
-odoo/addons/stock_owner_restriction/i18n/es.po,sha256=bv9cGwcPj90zcVt-uzypOLgiO8rcne-1ypXCfblphTA,2763
-odoo/addons/stock_owner_restriction/i18n/stock_owner_restriction.pot,sha256=rSjSL_2vlXEYCVQZ5xb-CX91Ytv5t-mewmTzSjJzpeI,2296
+odoo/addons/stock_owner_restriction/__manifest__.py,sha256=wG9Y4YEOKpug8-RkdlEnQdcFjVbleJMEBPD92ymwXBY,727
+odoo/addons/stock_owner_restriction/i18n/es.po,sha256=iBwPnFICMzPdZkGB8lpHzak6CvOuZm7aAeqr2ZN2AbE,2494
+odoo/addons/stock_owner_restriction/i18n/stock_owner_restriction.pot,sha256=QR6IcBw_2RjfZLq451AcmyTvmFlxpr0k58D5MDLaETE,2078
 odoo/addons/stock_owner_restriction/models/__init__.py,sha256=vP0QK8d6QXqo9mud_LMKsDK1_gjpSk2EIhzuO4GVKPY,199
 odoo/addons/stock_owner_restriction/models/product.py,sha256=Z_6358IoH3MG0dZXHph_F6QD2Qn1zr0DkfhQ29Yi9Gc,1481
-odoo/addons/stock_owner_restriction/models/stock_move.py,sha256=8wUnJ7CEuId_L1sGfDuy899WBqKC_kL0AFsVnP_NHi0,2335
+odoo/addons/stock_owner_restriction/models/stock_move.py,sha256=26wuoj6Za72mfvoD_xqr02t9vwHsqAhcu6F_KS_fnIA,2698
 odoo/addons/stock_owner_restriction/models/stock_picking.py,sha256=4dXt2_X4SW62lONjaHHvudiB4oDJ6ch99yA8SEKQw6c,337
-odoo/addons/stock_owner_restriction/models/stock_picking_type.py,sha256=RZUDC95_WymzAWHPzccE0t_FsvXBgTniJyjAsyBMhKI,606
+odoo/addons/stock_owner_restriction/models/stock_picking_type.py,sha256=lAxpPFkbNJvFfMA2mBUTHIVGS_51tlpeHFNNaYXS6mA,528
 odoo/addons/stock_owner_restriction/models/stock_quant.py,sha256=6E43-P6QhyIIrqohHc6EatqbVjcQertBZmIh1Hncqtw,2226
 odoo/addons/stock_owner_restriction/readme/CONFIGURE.rst,sha256=dskE9cSVJiCyuEHG-Tn0KE_7dsOvqawTTkMmKx8EzwI,377
 odoo/addons/stock_owner_restriction/readme/CONTRIBUTORS.rst,sha256=LITB28NTmeBgkSedZyAsaBH5192UaFePd3x3DW0l1Vs,133
 odoo/addons/stock_owner_restriction/readme/DESCRIPTION.rst,sha256=KtWHeRa5E98jqW-yidb53QQRc1yeJdItw6zazzd24Qk,190
 odoo/addons/stock_owner_restriction/readme/USAGE.rst,sha256=i9bXi-iEWb7Vqksbeh0y5lbq7bCZQOdoUkgZCALMlN0,1139
 odoo/addons/stock_owner_restriction/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/stock_owner_restriction/static/description/index.html,sha256=KExjSmadlHGUafrCVKPk-ajTmSwHzWB4d1Pv_5CGsFM,14553
+odoo/addons/stock_owner_restriction/static/description/index.html,sha256=TzaBjadtQuvkUWNWwYV9msl-E4zlqjGQSLNir_WsHGU,14553
 odoo/addons/stock_owner_restriction/tests/__init__.py,sha256=EvPnDgoZNnS4Mdb9ziLzlEumnqxJeJPQ3gWrpSpS4JA,108
-odoo/addons/stock_owner_restriction/tests/test_stock_owner_restriction.py,sha256=jKrYs8PLnLUNIGxrIRoDpzx-Swt0HPA2JnOg6BF0NDY,7229
+odoo/addons/stock_owner_restriction/tests/test_stock_owner_restriction.py,sha256=tgl0DPxxP9bnQmh80ILvnMnszCqvUyBTi9y0ioBEF60,5884
 odoo/addons/stock_owner_restriction/views/stock_picking_type_views.xml,sha256=Ex7wjoELWrYKCuyuXqJ11f1m3Mml_A4LWznSr73U8tY,547
 odoo/addons/stock_owner_restriction/views/stock_picking_views.xml,sha256=CGhlN6-5jAUicofmyTtvyJdCIjmONtneW2lmjZvHi0k,709
-odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/METADATA,sha256=Fy0rSHBdETelBkoAjR2JHXxm7aLrhSnlFdtcwaW-yL0,5192
-odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_stock_owner_restriction-15.0.1.1.0.1.dist-info/RECORD,,
+odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/METADATA,sha256=3ufeVM5jeeBd3hs6tclDPJuqVth6HNGNKCWA6aYjB_c,5193
+odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_stock_owner_restriction-16.0.1.0.0.2.dist-info/RECORD,,
```

